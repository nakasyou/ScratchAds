<!doctype HTML>
<html lang="ja">
  <head>
    <title>ScratchAd</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/style.css">
  </head>
  <body>
    <h1>ScratchAds</h1>
    <h2>あなたのサイトに広告を掲載する</h2>
    <p>ScratchAdsは、自分のサイトに広告を掲載したいという方々によって成り立っています。自分のサイトに載せる方法を解説します。</p>
    <div>
      <div>
        <label for="type">種類を選択</label>
        <select id="type" class="input">
          <option value="4-3">4:3 Scratchサイズ</option>
        </select>
      </div>
      <div>
        <label for="width">大きさを選択</label>
        <input id="width" type="number" class="input" value="480">
        <input type="range" class="input" min="0" max="1000" id="width-range" value="480">
      </div>
      <div id="result">
        <iframe style="overflow:hidden;">ScratchAds loading...</iframe>
      </div>
      <pre><code id="result-code"> </code></pre>
    </div>
  </body>
</html>
<script>
  const $result = document.querySelector("#result iframe")
  const $widthRange = document.getElementById("width-range")
  const $width = document.getElementById("width")
  const $type = document.getElementById("type")
  const $resultCode = document.getElementById("result-code")
  
  const make = () => {
    $result.src = `https://scratchads.deno.dev/ad/${$type.value}`
    $resultCode.textContent = $result.outerHTML
  }
  
  
  $widthRange.addEventListener("input", ev => {
    $width.value = ev.target.value
  })
  $width.addEventListener("input", ev => {
    $widthRange.value = ev.target.value
  })
  
  for(const input of document.getElementsByClassName("input")){
    input.addEventListener("change",make)
  }
  
  make()
</script>
